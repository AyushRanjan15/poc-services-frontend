<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Noise Detection - Redenlab</title>
  <link rel="stylesheet" href="css/noise-detection.css">
</head>
<body>
  <!-- Back to Home -->
  <header class="topbar">
    <a class="home-link" href="index.html" aria-label="Back to Home">
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M14 7l-5 5 5 5V7z"></path>
      </svg>
      Home
    </a>
    <span class="page-title">Noise Detection</span>
  </header>

  <main class="container">
    <div class="detection-container">
      <section class="card intro-card">
        <h2>Background Noise Detection</h2>
        <p class="muted">Real-time audio quality monitoring with speech vs. noise classification</p>
      </section>

      <section class="card status-card">
        <div class="status-indicator" id="statusIndicator">
          <img src="assets/no_peech.png" alt="Speech Indicator" class="indicator-image" id="indicatorImage">
        </div>
        <p class="status-text" id="statusText">Not Connected</p>
        <p class="confidence-text" id="confidenceText">Confidence: --</p>
      </section>

      <section class="card controls-card">
        <div class="controls">
          <button id="startDetectionBtn" class="btn btn-primary">Start Detection</button>
          <button id="stopDetectionBtn" class="btn btn-secondary" disabled>Stop Detection</button>
        </div>
      </section>

      <section class="card info-panel">
        <h3>Connection Info</h3>
        <div class="info-row">
          <span class="info-label">Status:</span>
          <span class="info-value" id="connectionStatus">Disconnected</span>
        </div>
        <div class="info-row">
          <span class="info-label">Frames Processed:</span>
          <span class="info-value" id="frameCount">0</span>
        </div>
        <div class="info-row">
          <span class="info-label">Sample Rate:</span>
          <span class="info-value" id="sampleRate">16000 Hz</span>
        </div>
        <div class="info-row">
          <span class="info-label">Frame Size:</span>
          <span class="info-value" id="frameSize">30-50ms</span>
        </div>
      </section>

      <section class="card logs-panel">
        <h3>Activity Log</h3>
        <div id="logContainer" class="log-container"></div>
      </section>
    </div>
  </main>

  <script src="js/config.js"></script>
  <script src="js/noiseDetector.js"></script>
  <script src="js/audioProcessor.js"></script>
  <script src="js/websocketClient.js"></script>
  <script src="js/noise-detection.js"></script>
  <script>
    // Keyboard shortcut to return home
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') window.location.href = 'index.html';
    });
  </script>
</body>
</html>
